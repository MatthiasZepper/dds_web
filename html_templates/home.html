
{% extends "index.html" %}

{% block content %}
    <div class="container">
      <div class="col-md-3">
        <form action="{{ reverse_url('create') }}" role="form" method="POST">
            {% module xsrf_form_html() %}
            <button class="btn btn-primary" type="submit">Create</button>
        </form>
      </div>
      <div class="col-md-3">
        Logged in as: {{user}}
      </div>
      <div class="col-md-3">
        <form action="{{ reverse_url('logout') }}" role="form" method="GET">
            {% module xsrf_form_html() %}
            <button class="btn btn-primary" type="submit">Log Out</button>
        </form>
      </div>
    </div>

    <div class="col-sm-12">
      <br>
        <h2>Projects</h2>
        <table class="table">
          <thead>
            <tr>
              <th>Project ID</th>
              <th>Project</th>
              <th>Order Date</th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody>
            {% for proj in projects %}
            <tr>
              <td>{{ proj }}</td>
              <td>{{ projects[proj]['name'] }}</td>
              <td>{{ projects[proj]['order_date'] }}</td>
              <td>{{ projects[proj]['status'] }}</td>
              <td><button class="btn btn-default btn-sm"  data-toggle="collapse" data-target="#{{proj}}">Info</button></td>
              <td>
                <form action="{{ reverse_url('project', proj) }}">
                <button class="btn btn-default btn-sm">See project</button>
                </form>
              </td>
            </tr>
            <tr id="{{proj}}" class="collapse">
              <td>
                <div>
                  <h5><i>Project information</i></h5>
                  <table class="table">
                    <tr>
                      <th class=subtable>Order ID: </th>
                      <td>{{ proj }}</td>
                    </tr>
                      <tr>
                        <th class=subtable>Project name: </th>
                        <td>{{ projects[proj]['name'] }}</td>
                      </tr>
                      <tr>
                        <th class=subtable>Category: </th>
                        <td>{{ projects[proj]['category'] }}</td>
                      </tr>
                      <tr>
                        <th class=subtable>Sensitive data: </th>
                        {% if projects[proj]['sensitive']=="True" %}
                          <td>Yes</td>
                        {% else %}
                          <td>No</td>
                        {% end %}
                      </tr>
                      <tr>
                        <th class=subtable>Project size: </th>
                        <td>Aggreg. size of all files.</td>
                      </tr>
                  </table>
                </div>
              </td>
              <td colspan="999">
                <div id="test">
                  <br>
                  <br>
                  <table>
                    <tr>
                      <th class=subtable>Project PI: </th>
                      <td>{{ projects[proj]['pi'] }}</td>
                    </tr>
                    <tr>
                      <th class=subtable>Project description: </th>
                      <td>{{ projects[proj]['description'] }}</td>
                    </tr>
                    <tr>
                      <th class=subtable>Comments from facility: </th>
                      <td>{{ projects[proj]['comments']}}</td>
                    </tr>

                  </table>
                </div>
              </td>
            </tr>
            {% end %}
          </tbody>
        </table>
      </div>

{% end %}
